<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="stylecode.kosta180.mapper.spmDetailMapper"> <!--mapper방식일 때 / namespace를 반드시 -->
	<cache />




	<!-- 쇼핑몰 EnrollNum에 해당하는 쇼핑몰 객체 -->
	<select id="selectedSPM" parameterType="int" resultType="ShoppingMallVO">
		SELECT *
		FROM SPM
		WHERE SPMENROLLNO =#{SPMENROLLNO}
	</select>

	<!-- 쇼핑몰 EnrollNum에 해당하는 쇼핑몰스타일 -->
	<select id="SpmStyle" parameterType="int" resultType="String">
		Select
		STYLE from SPMStyle
		WHERE SPMENROLLNO = #{SPMENROLLNO}
	</select>

	<!-- 쇼핑몰에 대한 상품 리스트 -->
	<select id="selectedProduct" parameterType="int" resultType="ProductVO">
		SELECT * FROM PRODUCT
		WHERE SPMENROLLNO = #{SPMENROLLNO}
	</select>

	<!-- 즐겨찾기 추가 -->
	<insert id="insertBookMark">
		INSERT INTO SPMBM(SPMBMNO, BMENROLLNO, MID)
		VALUES( SPMBM_seq.nextval, ${bmEnrollNo}, '${mId}' )
	</insert>

	<!-- 즐겨찾기 삭제 -->
	<delete id="deleteBm">
		Delete From SPMBM
		WHERE spmBmNo = #{spmBmNo }

	</delete>


	<!-- 즐겨찾기 여부 확인 -->
	<select id="checkBm" parameterType="map" resultType="Integer">
	
		SELECT SPMBMNO 
		from SPMBM
		WHERE MID= #{mId}
		AND spmEnrollNo = #{spmEnrollNo}
		
	</select>
	
	
	<select id="detailBookMark" parameterType="String" resultType="ShoppingMallVO">
		SELECT *
		FROM SPM
		WHERE SPMENROLLNO
		IN (SELECT SPMENROLLNO FROM SPMBM WHERE MID = #{MID})
	</select>


	<delete id="deleteBookMark" parameterType="int">
		DELETE FROM SPMBM
		WHERE spmEnrollNo = #{spmEnrollNo}
	</delete>





</mapper>















