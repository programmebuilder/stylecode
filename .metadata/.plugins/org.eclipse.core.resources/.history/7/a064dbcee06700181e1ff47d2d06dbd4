<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<%@ taglib prefix="sec" uri="http://www.springframework.org/security/tags" %>
<%@ page import="org.springframework.security.core.context.SecurityContextHolder" %>
<%@ page import="org.springframework.security.core.Authentication" %>

<!DOCTYPE html>
<html>
<head>
	<title>Social Media</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8">
	
	<!-- 내부 자바스크립트 -->
	<script src="/resources/sns/js/juqery-3.3.1.js"></script>
	<script src="/resources/sns/js/jquery-3.3.1.min.js"></script>
	<script src="/resources/sns/coreslider/js/coreSlider.js"></script>
	<script src="/resources/sns/js/list.js"></script>
	<script src="/resources/sns/bootstrap/js/bootstrap.min.js"></script>
	<script src="/resources/sns/bootstrap-switch/js/bootstrap-switch.min.js"></script>
	<script src="/resources/sns/js/socialyte.min.js"></script>
	
	<!-- 외부 자바스크립트 -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.1/handlebars.js"></script>
	<script src="https://twemoji.maxcdn.com/twemoji.min.js"></script>
	
	<!-- 외부 CSS -->
	<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,600,700" rel="stylesheet">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css">
	
	<!-- 내부 CSS -->
	<link rel="stylesheet" href="/resources/sns/bootstrap/css/bootstrap.min.css" type="text/css">
	<link rel="stylesheet" href="/resources/sns/bootstrap-switch/css/bootstrap-switch.min.css">
	<link rel="stylesheet" href="/resources/sns/css/sns.css" type="text/css">
	<link rel="stylesheet" href="/resources/dist/css/AdminLTE.min.css">
	<link rel="stylesheet" href="/resources/sns/coreslider/css/coreSlider.css">
	<link rel="stylesheet" href="/resources/sns/coreslider/css/coreSlider.scss">
</head>
<body id="sns">
	<!-- 헤더 및 네비 -->
	<header class="text-right">
		<form class="text-left search" method="GET">
			<input name="q" type="text" placeholder="Search..">
		</form>
		<div class="menu-icon">
			<div class="dropdown">
				<span class="dropdown-toggle" role="button" id="dropdownSettings" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span class="hidden-xs hidden-sm">Settings</span> <i class="fa fa-cogs" aria-hidden="true"></i>
				</span>
				<ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownSettings">
					<li><a href="settings.html" title="Settings" data-toggle="modal" data-target="#settingsmodal">
							<div class="col-xs-4">
								<i class="fa fa-wrench" aria-hidden="true"></i>
							</div>
							<div class="col-xs-8 text-left">
								<span>Settings</span>
							</div>
					</a></li>
					<li><a href="#" title="Settings">
							<div class="col-xs-4">
								<i class="fa fa-question" aria-hidden="true"></i>
							</div>
							<div class="col-xs-8 text-left">
								<span>FAQ</span>
							</div>
					</a></li>
					<li><a href="#" title="Settings">
							<div class="col-xs-4">
								<i class="fa fa-sign-out" aria-hidden="true"></i>
							</div>
							<div class="col-xs-8 text-left">
								<span>Logout</span>
							</div>
					</a></li>
				</ul>
			</div>
		</div>
		<div class="second-icon dropdown menu-icon">
			<span class="dropdown-toggle" role="button" id="dropdownNotification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"> <span class="hidden-xs hidden-sm">Notifications</span> <i class="fa fa-bell-o" aria-hidden="true"></i> <span class="badge">2</span>
			</span>
			<ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownNotification">
				<li class="new-not"><a href="#" title="User name comment"><img src="/resources/sns/img/sample/user2.jpg" alt="User name" class="img-circle img-user-mini"> User comments your post</a></li>
				<li class="new-not"><a href="#" title="User name comment"><img src="/resources/sns/img/sample/user3.jpg" alt="User name" class="img-circle img-user-mini"> User comments your post</a></li>
				<li><a href="#" title="User name comment"><img src="/resources/sns/img/sample/user4.jpg" alt="User name" class="img-circle img-user-mini"> User comments your post</a></li>
				<li role="separator" class="divider"></li>
				<li><a href="#" title="All notifications">All Notifications</a></li>
			</ul>
		</div>
		<div class="second-icon menu-icon">
			<span><a href="personal-profile.html" title="Profile"><span class="hidden-xs hidden-sm">Profile</span> <i class="fa fa-user" aria-hidden="true"></i></a> </span>
		</div>
		<div class="second-icon menu-icon">
			<span><a href="wall.html" title="Wall"><span class="hidden-xs hidden-sm">Wall</span> <i class="fa fa-database" aria-hidden="true"></i></a> </span>
		</div>
	</header>
	<!-- 왼쪽 사이드 바 회원 프로필 -->
	<div class="sidebar-nav">
		<a href="personal-profile.html" title="Profile"> <img src="/resources/sns/img/sample/user.jpg" alt="User name" class="img-circle img-user">
		</a>
		<h2 class="text-center hidden-xs">
			<a href="personal-profile.html" title="Profile">${pageContext.request.userPrincipal.name}</a>
		</h2>
		<p class="text-center user-description hidden-xs">
			<i>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</i>
		</p>
	</div>
	<!-- 포스트 작성 및 목록 -->
	<div class="content-posts active" id="posts">
		<div class="primary-content">
			<div id="posts-container" class="container-fluid container-posts">
				<!-- 포스트 작성 -->
				<form id="registerForm" role="form" method="post" action="/sns/register">
					<div class="card-post">
						<div class="row">
							<div class="col-xs-3 col-sm-2">
								<a href="personal-profile.html" title="Profile"> <img src="/resources/sns/img/sample/user.jpg" alt="User name" class="img-circle img-user">
								</a>
							</div>
							<div class="col-xs-9 col-sm-10 info-user">
								<h3>
									<!-- 작성자 이름 -->
									<input type="hidden" name="mid" value="${pageContext.request.userPrincipal.name}">
									<a href="personal-profile.html" title="Profile">My User</a>
								</h3>
								<p>
									<i>now</i>
								</p>
							</div>
						</div>
						<div class="row">
							<!-- 게시물 내용 -->
							<div class="col-sm-8 col-sm-offset-2 data-post">
								<textarea class="form-control" name="bdcontent" placeholder="회원님 무슨 생각을 하시나요?"></textarea>
								<!-- 파일 업로드 -->
								<div class="form-group">
									<div class="fileDrop">
										<label for="exampleInputEmali1">File DROP Here</label>
									</div>
								</div>
								<ul class="mailbox-attachments clearfix uploadedList">
								</ul>
								<!-- 작성 버튼 -->
								<button type="submit" class="submit-post">Post</button>
							</div>
						</div>
					</div>
				</form>
				<%-- <!-- 포스트 목록 -->
				<c:forEach items="${list}" var="list" begin="0" end="4">
					<div class="card-post" id="post-list">
						<div class="row">
							<div class="col-xs-3 col-sm-2">
								<!-- 회원 프로필 사진 -->
								<a href="user-profile.html" title="User Profile"> <img src="/resources/sns/img/sample/user2.jpg" alt="User name" class="img-circle img-user">
								</a>
							</div>
							<div class="col-xs-9 col-sm-10 info-user">
								<h3>
									<!-- 회원 이름 -->
									<span>
										<a href="user-profile.html" title="User Profile">${list.mnm}</a>
									</span>
									<span>
										<button id="follow-button">+ Follow</button>	
									</span>
								</h3>
								<p>
									<!-- 작성 시간 -->
									<i>${list.bdrgdate}</i>
								</p>
							</div>
						</div>
						<div class="row">
							<div class=" col-sm-8 col-sm-offset-2 data-post">
								<!-- 포스트 내용  -->
								<p>${list.bdcontent}</p>
								<!-- 첨부 이미지 -->
								<c:forEach items="${listAttach}" var="listAttach">
									<c:if test="${list.bdno == listAttach.bdno}">
										<img src="/sns/displayFile?fileName=${listAttach.imgid}" alt="image post" class="img-post">
									</c:if>
								</c:forEach>
								<div class="reaction">
									<!-- 좋아요 및 댓글 수 -->
									<i class="far fa-heart"></i> ${list.likehits} &emsp; <i class="far fa-comment"></i> ${list.rplyhits}
								</div>
								<div class="comments">
									<div class="more-comments">View more comments</div>
									<ul>
										<li><b>User1</b> Lorem Ipsum Dolor si amet</li>
										<li><b>User2</b> Lorem Ipsum Dolor si amet &#x1F602;</li>
									</ul>
									<form>
										<input type="text" class="form-control" placeholder="Add a comment">
									</form>
								</div>
							</div>
						</div>
					</div>
					<!-- 포스트 목록 끝 -->
				</c:forEach> --%>
			</div>
		</div>
		<!--Close #posts-container-->
		<div class="sidebar-right hidden-xs hidden-sm">
			<div class="card-post">
				<div class="row">
					<div class="col-sm-12">
						<p>
							<i>Suggested post</i>
						</p>
						<h3>
							<a href="#" title="Company">Company</a>
						</h3>
						<img src="/resources/sns/img/sample/company.jpg" alt="Suggested post">
					</div>
				</div>
			</div>
			<div class="card-post">
				<div class="row">
					<div class="col-sm-12">
						<h3>Popular Users</h3>
					</div>
					<div class="col-xs-3 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/user.jpg" alt="User name" class="img-circle">
						</a>
					</div>
					<div class="col-xs-3 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/user2.jpg" alt="User name" class="img-circle">
						</a>
					</div>
					<div class="col-xs-3 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/user3.jpg" alt="User name" class="img-circle">
						</a>
					</div>
					<div class="col-xs-3 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/user4.jpg" alt="User name" class="img-circle">
						</a>
					</div>
					<div class="col-xs-3 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/user5.jpg" alt="User name" class="img-circle">
						</a>
					</div>
					<div class="col-xs-3 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/user6.jpg" alt="User name" class="img-circle">
						</a>
					</div>
					<div class="col-xs-3 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/user7.jpg" alt="User name" class="img-circle">
						</a>
					</div>
					<div class="col-xs-3 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/user8.jpg" alt="User name" class="img-circle">
						</a>
					</div>
				</div>
			</div>
			<div class="card-post">
				<div class="row">
					<div class="col-sm-12">
						<h3>Popular Photos</h3>
					</div>
					<div class="col-xs-4 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/photo1.jpg" alt="User name">
						</a>
					</div>
					<div class="col-xs-4 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/photo2.jpg" alt="User name">
						</a>
					</div>
					<div class="col-xs-4 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/photo3.jpg" alt="User name">
						</a>
					</div>
					<div class="col-xs-4 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/photo4.jpg" alt="User name">
						</a>
					</div>
					<div class="col-xs-4 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/photo5.jpg" alt="User name">
						</a>
					</div>
					<div class="col-xs-4 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/photo6.jpg" alt="User name">
						</a>
					</div>
					<div class="col-xs-4 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/photo7.jpg" alt="User name">
						</a>
					</div>
					<div class="col-xs-4 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/photo8.jpg" alt="User name">
						</a>
					</div>
					<div class="col-xs-4 popular-img">
						<a href="#"> <img src="/resources/sns/img/sample/photo9.jpg" alt="User name">
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div id="loading">
		<img src="/resources/sns/img/sample/load.gif" alt="loader">
	</div>
	<!-- Close #posts -->
	<!-- Modal container for settings--->
	<div id="settingsmodal" class="modal fade text-center">
		<div class="modal-dialog">
			<div class="modal-content"></div>
		</div>
	</div>
</body>
<script id="template" type="text/x-handlebars-template">
<li>
	<span class="mailbox-attachment-icon has-img"><img src="{{imgsrc}}" alt="Attachment"></span>
	<div class="mailbox-attachment-info">
		<a href="{{getLink}}" class="mailbox-attachment-name">{{fileName}}</a>
		<a href="{{fullName}}" class="btn btn-default btn-xs pull-right delbtn"><i class="fas fa-times"></i></a>
	</div>
</li>
</script>
<script src="/resources/sns/js/upload.js"></script>
<script src="/resources/sns/js/scroll-pagination.js"></script>
</html>
