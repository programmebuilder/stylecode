<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="stylecode.kosta180.mapper.CrollMapper">
	 

	    <insert id="insertShopData" parameterType="java.util.List">
	        <foreach collection="list" item="item" open="INSERT ALL " separator=" " close="SELECT * FROM DUAL" > 
				    INTO SPM (SPMENROLLNO, SPMNM, SPMURL,
				                            SPMINFO, SPMVIEWS, SPMAGES, SPMDATE)
			    VALUES (
			    extractvalue(dbms_xmlgen.getxmltype('select SPM_ENROLLNO_SEQ.nextval - 1 from dual'),'//text()'),
			     #{item.spmNm}, #{item.spmURL},
				 #{item.spmInfo}, 0, #{item.spmAges}, SYSDATE)
	        </foreach>
    	</insert>
    	
    	<insert id="insertServiceMappings" parameterType="java.util.List">
    insert all
    <foreach collection="list" item="channel" index="index" >
    into tva_upselladmin_channel (id, source_id, service_id, name) values  (
        extractvalue(dbms_xmlgen.getxmltype('select TVA_UPSELLADMIN_CHANNEL_SEQ.nextval - 1 from dual'),'//text()'),
        #{channel.sourceId}, 
        #{channel.serviceId}, 
        #{channel.name}channel.name}
        )
    </foreach>
            SELECT * FROM dual
</insert>

</mapper>